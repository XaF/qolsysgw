from types import SimpleNamespace


def get_summary(secure_arm=False, partition_ids=None,
                zone_ids=None, partition_status=None):
    if partition_status is None:
        partition_status = {}

    event = {
        'event': 'INFO',
        'info_type': 'SUMMARY',
        'partition_list': [
            {
                'partition_id': 0,
                'name': 'partition0',
                'status': partition_status.get(0, 'DISARM'),
                'secure_arm': secure_arm,
                'zone_list': [
                    {
                        'id': '001-0000',
                        'type': 'Door_Window',
                        'name': 'My Door',
                        'group': 'entryexitdelay',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10000,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 1,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0001',
                        'type': 'Door_Window',
                        'name': 'My Window',
                        'group': 'entryexitlongdelay',
                        'status': 'Open',
                        'state': '0',
                        'zone_id': 10001,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 1,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0010',
                        'type': 'Motion',
                        'name': 'My Motion',
                        'group': 'awayinstantmotion',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10010,
                        'zone_physical_type': 2,
                        'zone_alarm_type': 3,
                        'zone_type': 2,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0011',
                        'type': 'Panel Motion',
                        'name': 'Panel Motion',
                        'group': 'safetymotion',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10011,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 119,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0020',
                        'type': 'GlassBreak',
                        'name': 'My Glass Break',
                        'group': 'glassbreakawayonly',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10020,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 0,
                        'zone_type': 116,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0021',
                        'type': 'Panel Glass Break',
                        'name': 'Panel Glass Break',
                        'group': 'glassbreakawayonly',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10021,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 0,
                        'zone_type': 116,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0030',
                        'type': 'Bluetooth',
                        'name': 'My Phone',
                        'group': 'mobileintrusion',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10030,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 1,
                        'zone_type': 115,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0040',
                        'type': 'SmokeDetector',
                        'name': 'My Smoke Detector',
                        'group': 'smoke_heat',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10040,
                        'zone_physical_type': 9,
                        'zone_alarm_type': 9,
                        'zone_type': 5,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0041',
                        'type': 'CODetector',
                        'name': 'My CO Detector',
                        'group': 'entryexitdelay',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10041,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 1,
                        'partition_id': 0,
                    },
                    {
                        'id': '001-0050',
                        'type': 'Water',
                        'name': 'My Water Detector',
                        'group': 'WaterSensor',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 10050,
                        'zone_physical_type': 8,
                        'zone_alarm_type': 0,
                        'zone_type': 15,
                        'partition_id': 0,
                    },
                ],
            },
            {
                'partition_id': 1,
                'name': 'partition1',
                'status': partition_status.get(1, 'DISARM'),
                'secure_arm': secure_arm,
                'zone_list': [
                    {
                        'id': '002-0000',
                        'type': 'Door_Window',
                        'name': 'My 2nd Door',
                        'group': 'instantperimeter',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20000,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 1,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0001',
                        'type': 'Doorbell',
                        'name': 'My Doorbell Sensor',
                        'group': 'localsafety',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20001,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 109,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0010',
                        'type': 'Freeze',
                        'name': 'My Freeze Sensor',
                        'group': 'freeze',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20010,
                        'zone_physical_type': 6,
                        'zone_alarm_type': 0,
                        'zone_type': 17,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0020',
                        'type': 'Heat',
                        'name': 'My Heat Sensor',
                        'group': 'smoke_heat',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20020,
                        'zone_physical_type': 10,
                        'zone_alarm_type': 0,
                        'zone_type': 8,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0021',
                        'type': 'Temperature',
                        'name': 'My Temperature Sensor',
                        'group': 'Temperature',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20021,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 0,
                        'zone_type': 8,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0030',
                        'type': 'Tilt',
                        'name': 'My Tilt Sensor',
                        'group': 'garageTilt1',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20030,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 16,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0040',
                        'type': 'Keypad',
                        'name': 'My Keypad Sensor',
                        'group': 'fixedintrusion',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20040,
                        'zone_physical_type': 4,
                        'zone_alarm_type': 0,
                        'zone_type': 104,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0050',
                        'type': 'Auxiliary Pendant',
                        'name': 'My Auxiliary Pendant Sensor',
                        'group': 'fixedmedical',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20050,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 0,
                        'zone_type': 21,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0060',
                        'type': 'Siren',
                        'name': 'My Siren Sensor',
                        'group': 'Siren',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20060,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 14,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0070',
                        'type': 'KeyFob',
                        'name': 'My KeyFob Sensor',
                        'group': 'mobileintrusion',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20070,
                        'zone_physical_type': 3,
                        'zone_alarm_type': 0,
                        'zone_type': 102,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0080',
                        'type': 'TakeoverModule',
                        'name': 'My TakeoverModule Sensor',
                        'group': 'takeovermodule',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20080,
                        'zone_physical_type': 13,
                        'zone_alarm_type': 0,
                        'zone_type': 18,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0080',
                        'type': 'Door_Window',
                        'name': 'My TakeoverModule Door Sensor',
                        'group': 'entryexitlongdelay',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 200802,
                        'zone_physical_type': 1,
                        'zone_alarm_type': 3,
                        'zone_type': 1,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0081',
                        'type': 'Translator',
                        'name': 'My Translator Sensor',
                        'group': 'translator',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20081,
                        'zone_physical_type': 14,
                        'zone_alarm_type': 0,
                        'zone_type': 20,
                        'partition_id': 1,
                    },
                    {
                        'id': '002-0090',
                        'type': 'Shock',
                        'name': 'My Shock Sensor',
                        'group': 'Shock',
                        'status': 'Closed',
                        'state': '0',
                        'zone_id': 20090,
                        'zone_physical_type': 12,
                        'zone_alarm_type': 0,
                        'zone_type': 107,
                        'partition_id': 1,
                    },
                ],
            },
        ],
        'nonce': 'qolsys',
        'requestID': '<request_id>',
    }

    if partition_ids is not None:
        event['partition_list'] = [
            p for p in event['partition_list']
            if p['partition_id'] in partition_ids
        ]

    if zone_ids is not None:
        for i, partition in enumerate(event['partition_list']):
            partition['zone_list'] = [
                z for z in partition['zone_list']
                if z['zone_id'] in zone_ids
            ]

    # Prepare the entity ids so we can go over those easily
    entity_ids = [
        "qolsys_panel_{}".format(z['name'].lower().replace(' ', '_'))
        for p in event['partition_list']
        for z in p['zone_list']
    ]

    topics = [
        'config',
        'availability',
        'state',
        'attributes',
    ]

    last_topic = (f'homeassistant/binary_sensor/'
                  f'{entity_ids[-1]}/{topics[-1]}')

    return SimpleNamespace(
        event=event,
        entity_ids=entity_ids,
        topics=topics,
        last_topic=last_topic,
    )
